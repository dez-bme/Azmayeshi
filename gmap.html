<!DOCTYPE html>
<html>
<head>
    <title>Campus Map with Google Maps</title>
    <style>
        body { margin: 0; padding: 0; }
        #map { height: 100vh; width: 100%; }
        .controls {
            position: absolute;
            top: 10px;
            right: 10px;
            z-index: 1000;
            background: white;
            padding: 10px;
            border-radius: 5px;
            box-shadow: 0 0 10px rgba(0,0,0,0.2);
            width: 250px;
        }
        select, button {
            width: 100%;
            padding: 8px;
            margin: 5px 0;
        }
    </style>
</head>
<body>
    <div id="map"></div>
    <div class="controls">
        <h3>Campus Navigation</h3>
        <label>From: </label>
        <select id="start">
            <option value="">--Select--</option>
            <option value="32.40263293538306,48.3773946762085">Building A</option>
            <option value="32.40458499768988,48.37729275226594">Building B</option>
        </select>
        <label>To: </label>
        <select id="end">
            <option value="">--Select--</option>
            <option value="32.40263293538306,48.3773946762085">Building A</option>
            <option value="32.40458499768988,48.37729275226594">Building B</option>
        </select>
        <button id="showRoute">Show Walking Path</button>
        <div id="distanceInfo"></div>
    </div>

    <!-- Load Google Maps API without key (limited functionality) -->
    <script src="https://maps.googleapis.com/maps/api/js?callback=initMap" async defer></script>
    
    <script>
        function initMap() {
            // Map center coordinates
            const campusCenter = {lat: 32.40364294040823, lng: 48.37701380252838};
            
            // Initialize map
            const map = new google.maps.Map(document.getElementById('map'), {
                zoom: 17,
                center: campusCenter,
                mapTypeId: 'hybrid'
            });
            
            // Define buildings
            const buildingA = {
                position: {lat: 32.40263293538306, lng: 48.3773946762085},
                title: "Building A"
            };
            
            const buildingB = {
                position: {lat: 32.40458499768988, lng: 48.37729275226594},
                title: "Building B"
            };
            
            // Add markers
            new google.maps.Marker({
                position: buildingA.position,
                map: map,
                title: buildingA.title,
                label: "A"
            });
            
            new google.maps.Marker({
                position: buildingB.position,
                map: map,
                title: buildingB.title,
                label: "B"
            });
            
            // Define walking path coordinates
            const walkingPathCoordinates = [
                buildingA.position,
                {lat: 32.4029, lng: 48.3776}, // Waypoint 1
                {lat: 32.4036, lng: 48.3771}, // Waypoint 2
                {lat: 32.4040, lng: 48.3776}, // Waypoint 3
                {lat: 32.4045, lng: 48.3771}, // Waypoint 4
                buildingB.position
            ];
            
            // Create walking path
            const walkingPath = new google.maps.Polyline({
                path: walkingPathCoordinates,
                geodesic: true,
                strokeColor: "#00FF00",
                strokeOpacity: 1.0,
                strokeWeight: 5
            });
            
            // Handle route button click
            document.getElementById('showRoute').addEventListener('click', function() {
                const start = document.getElementById('start').value;
                const end = document.getElementById('end').value;
                
                if(start && end) {
                    const startCoords = start.split(',');
                    const endCoords = end.split(',');
                    
                    // Set path endpoints
                    walkingPath.setPath([
                        {lat: parseFloat(startCoords[0]), lng: parseFloat(startCoords[1])},
                        {lat: parseFloat(endCoords[0]), lng: parseFloat(endCoords[1])}
                    ]);
                    
                    // Show the path on map
                    walkingPath.setMap(map);
                    
                    // Calculate distance
                    const distance = google.maps.geometry.spherical.computeDistanceBetween(
                        new google.maps.LatLng(startCoords[0], startCoords[1]),
                        new google.maps.LatLng(endCoords[0], endCoords[1])
                    ) / 1000; // in km
                    
                    document.getElementById('distanceInfo').innerHTML = 
                        `Walking distance: ${distance.toFixed(2)} km (~${Math.round(distance * 12)} minutes)`;
                    
                    // Fit map to path bounds
                    const bounds = new google.maps.LatLngBounds();
                    walkingPath.getPath().getArray().forEach(function(latLng) {
                        bounds.extend(latLng);
                    });
                    map.fitBounds(bounds);
                } else {
                    alert("Please select both start and end points");
                }
            });
        }
    </script>
</body>
</html>
